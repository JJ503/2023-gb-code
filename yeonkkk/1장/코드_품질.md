# 1장. 코드 품질

## 요약

* 좋은 소프트웨어를 만들려면 고품질 코드를 작성해야 한다.


* 코드는 일반적으로 여러 단계의 검사와 테스트를 통과해야 한다.


* 테스트는 코드를 작성하는 모든 단계에서 고려하는 것이 좋다.


* 고품질 코드를 작성하면 처음에는 시간이 오래 걸리지만, 중장기적으로는 개발 시간이 단축되는 경우가 많다.

<br><br>

## 1. 코드 품질이 중요한 이유
> 고품질 코드는 신뢰할 수 있고, 유지보수가 쉬우며, 버그가 적은 소프트웨어를 생산한다.

<br><br>

### 소프트웨어 개발과 배포 프로세스
> 코드가 의도한 대로 작동하고 기존 기능이 지속적으로 잘 작동하는지 확인하는 과정 및 점검

* 코드베이스 : 코드 저장소(repository)로 형상 관리 시스템에 의해 관리된다.

  * 형상 관리 시스템으로 git, perforce 등 이 있다.


* 코드 제출 : commit, merging a pull request 등


* 코드 검토 : 코드 검토를 통해 문제를 발견한다.


* 제출 전 검사 : 테스트 또는 컴파일에 실패할 경우 병합되지 않도록 차단할 수 있다.
  * pre-merge hook, pre-merge check, pre-commit check 등


* 배포 : 품질 보증 검사 후 실행 환경에 배포  


* 프로덕션 : 실제 서비스되는 환경 (테스트 환경 X)  


<br><br>

## 2. 고품질의 코드가 이루고자 하는 4가지 목표

* **코드는 작동해야 한다.**

  * 코드는 작성된 목적대로 동작해야 한다.
  
  * 코드는 버그가 없어야 한다.
  
  * 코드 작성자는 모든 요구 사항을 파악할 필요가 있다.


* **코드는 작동이 멈춰서는 안 된다.**

  * 코드 작동은 일시적일 수 있다. 상황이 바뀌면서 동작이 멈출 수 있음에 주의하자.


* **코드는 변화하는 요구 사항에 적응해야 한다.**

  * 작성 후에 수정되지 않는 코드는 거의 없다. 요구 사항은 계속 변한다.
  
  * 적응성 높은 코드를 작성해야 한다.

  
* **코드는 이미 존재하는 기능을 다시 구현해서는 안 된다.**
  
  * 문제를 해결하기 위해 코드를 작성할 때, 큰 문제를 여러 개의 작은 하위 문제로 나눈다.

  * 이미 누군가 동일한 문제를 해결한 상태라면 코드를 재사용하자.

  * 이미 구현된 코드를 재사용하면 4가지 장점이 있다.
    
    * 시간과 노력을 절약한다.
    
    * 버그 가능성을 줄여준다.
    
    * 기존 전문지식을 활용한다.
    
    * 코드가 이해하기 쉽다.
  
  * 코드를 작성할 때 쉽게 재사용할 수 있는 방식으로 코드를 구성한다.


<br><br>

## 3. 코드 품질의 핵심 요소

* **코드는 읽기 쉬워야 한다.**

  * 코드의 가독성이 떨어지면 코드를 읽는 개발자가 시간을 더 많이 들여야 한다.
  
  * 코드를 읽고 사용하는 개발자가 기능에 대해 잘못 이해하거나 중요한 세부 사항을 놓칠 가능성이 커진다.
  
  * 코드 검토 시 버그를 발견하기 어렵고 다른 개발자가 코드를 수정할 때 버그가 도입될 가능성이 커진다.


* **코드는 예측 가능해야 한다.**
 
  * 좋은 의도를 가진 코드라도 예상을 벗어난 동작을 수행하면 위험이 있을 수 있다.

  * 예상을 벗어나는 코드는 그 상황에 대한 대처가 어려울 수 있다.


* **코드를 오용하기 어렵게 만들어야 한다.**

  * 코드를 오용하기 어렵거나 불가능하게 만들면 계속해서 잘 작동할 가능성을 극대화할 수 있다.   


* **코드를 모듈화 하라.**
  
  * 모듈화는 개체나 시스템의 구성 요소가 독립적으로 교환되거나 교체될 수 있음을 의미한다.
  
  * 모듈화된 개체는 다른 부분에 영향을 주지 않으면서 독립적으로 교환하거나 교체하기 쉽다.
  
  * 모듈화된 시스템은 인터페이스가 잘 정의되어 서로 다른 구성 요소 간 상호작용하는 지점이 최소화된다.
  
  * 변화하는 요구 사항에 더 쉽게 적응할 수 있는 코드를 작성할 수 있다.
  
  * 모듈화된 시스템은 이해하기 쉽고 추론하기 쉽다 (기능 단위간 상호작용이 잘 정의되고 문서화 되기 때문)


* **코드를 재사용 가능하고 일반화할 수 있게 작성하라.**

  * 재사용 가능하고 일반화된 코드는 테스트된 논리를 재사용하기 때문에 시간과 노력을 절약해주고 신뢰할 수 있다.
  
  * 모듈화된 코드는 높은 재사용성과 일반화성을 갖는다.


* **테스트가 용이한 코들르 작성하고, 제대로 테스트하라.**

  * 테스트는 코드가 동작하고, 멈추지 안혹 계속 잘 실행하도록 보장하기 위해 필수적인 부분이다.
  
  * 소프트웨어 시스템은 크고 복잡하기 때문에 한 사람이 모든 세부사항을 알 수 없고 사람은 실수할 수 있는 존재이기 때문에 테스트가 필요하다.
  
  * 테스트의 종류: 단위 테스트, 통합 테스트, 종단간 테스트
  
  * 테스트의 용이성: 코드가 얼마나 테스트하기 적합한지 나타내며, 모듈화된 코드는 테스트 용이성이 더 좋다.
  
  * 테스트는 코드 작성의 모든 단계에서 필수적이고 기본적인 부분이다.


<br><br>

## 4. 고품질 코드로 시간과 노력을 절약할 수 있다

* 임시적으로 문제를 해결할 수 있는 코드는 시간을 절약할 수 있지만 다양한 문제를 야기할 수 있다.
  
  * 취약하고 복잡한 코드베이스로 귀결될 수 있다.
  
  * 이해하기 어렵고 추론할 수 없는 코드가 된다.
  
  * 새로운 기능을 추가하거나 버그를 수정하기 어려워진다.
  
  * 작동하지 않는 코드를 처리하고 재설계해야하기 때문에 시간이 더 많이 걸린다.
