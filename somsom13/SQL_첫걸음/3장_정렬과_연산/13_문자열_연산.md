## 13강 문자열 연산

> 문자열 연산자의 종류 → **결합 관련 연산자**
`+`, `||`, `CONCAT`, `SUBSTRING`, `TRIM`, `CHARACTER_LENGTH`

### 1. 문자열 결합: CONCAT

`'ABC' || '1234'` → `ABC1234` 

2개의 열 데이터를 모아서 1개의 열로 처리하고 싶을 때 자주 사용한다.

- 결합 연산자에는 데이터베이스마다 방언이 있다.
    - `+` : SQL Server
    - `||` : Oracle, DB2, PostgreSQL
    - `CONCAT` : MySQL

문자열 결합 연산자는 문자열형 데이터, 수치형 데이터 둘 다 연산할 수 있다.

ex) `SELECT CONCAT(quantity, unit) FROM 테이블명`

- quantity가 수치형이고 unit이 문자열형 데이터
    - quantity: 10, unit: 개
- **수행 결과: 10개**
- 연산 결과는 항상 문자열형 데이터이다.

### 2. SUBSTRING 함수: 문자열 일부 잘라서 반환

문자열의 일부분을 계산해서 반환해준다.

`SUBSTRING(대상 문자열, 추출할 자리 번호 (1번부터 시작), 추출할 문자 개수)`

- 날짜 + 연속된 번호 → 고유한 ID로 사용하는 경우, 보통 날짜 / 연속된 번호를 별개의 컬럼으로 저장한다.
    - `SUBSTRING('20140125001', 1, 4)` → ‘2014’ : 1번 자리부터 4개의 문자열 추출
    - `SUBSTRING('20140125001', 5, 2)` → ‘01’: 5번 자리부터 2개의 문자열 추출
- YYYYMMDD 형식의 문자열 데이터에 → 년, 월, 일 추출

### 3. TRIM 함수: 앞뒤 공백 제거

문자열 앞뒤 여분의 스페이스를 제거해준다. → 주로 고정길이 문자열 (`CHAR` 에서 사용)

**문자열 중간에 존재하는 스페이스는 제거되지 않는다.**

### 4. CHARACTER_LENGTH 함수: 문자열 길이 계산

- `CHARACTER_LENGTH 함수` : 문자열 길이를 문자 단위로 계산
- `OCTET_LENGTH 함수` : 문자열 길이를 바이트 단위로 계산

> 컴퓨터 안에 저장되는 다양한 종류의 데이터 (수치 데이터, 음성 데이터, **문자열 데이터** 는 모두 결국 ‘수치’ 로 저장된다.

- 문자 하나가 몇 바이트인지는 “인코딩 방식”에 따라 결정된다.
    - 즉, 컴퓨터가 문자를 인코딩하는 방식에 따라서 차지하는 저장공간의 크기가 달라진다.
    - VARCHAR형의 경우, 문자열의 최대 길이를 바이트 단위로 저장한다.
    - **문자세트(character set)** 에 따라서 길이가 문자 수로 간주되기도 한다.
- **문자세트(character set)**
    - RDBMS에서 인코딩 방식을 부르는 이름.
        - ASCII 문자, UTF-8 등등..
    - 한 문자가 몇 바이트인지는 사용되는 문자 set에 따라 달라진다.
- CHARSET_LENGTH 함수에서는 문제가 되지 않지만, OCTET_LENGTH에서는 문자세트에 따라 계산 결과가 달라질 수 있다.
